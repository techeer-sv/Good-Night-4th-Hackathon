# Good-Night-4th-Hackathon
공연 좌석 예매 시스템 풀스택 구현

## 안내사항

- 본 레포지토리를 **fork**하여 과제를 수행하고, 완료시 PR을 보냅니다.
- 과제의 소스코드는 본인의 GitHub 레포지토리에 **Public**으로 올려주세요.
- 진행 간 문의사항은 이 레포지토리의 Issue로 등록해주세요.
- 구현 내용은 README.md 하단에 이어서 작성해 주세요.

## 과제 목표

공연 좌석 예매 시스템 구현

### 기술 스택

- Backend: 자유 선택 (Spring Boot, Node.js, Django, FastAPI 등)
- Frontend: 자유 선택 (React, Vue, Svelte, Vanilla JS 등)
- Database: 자유 선택
- 선택한 기술 스택에 대한 이유를 README에 간단히 설명해주세요

### 평가 항목

- 문제 해결 접근 방식에서 기술적 의사결정
- 구현 완성도와 문서화 수준

## 요구사항

### 최소 요구사항
> 아래 목표들을 달성하기 위한 구현 방법은 자유롭게 선택하세요.

1. **좌석 현황 표시**
    - 3x3 격자 형태로 총 9개의 좌석 표시
    - 각 좌석의 예약 가능/불가능 상태를 시각적으로 구분
2. **좌석 예약 기능**
    - 사용자가 빈 좌석을 클릭하여 선택
    - 페이지를 이동하여 예약자 정보 입력
    - 정보 입력 완료 후 예약 확정 시도
        - 99% 확률로 예약 성공 처리
        - 1% 확률로 의도적 실패 처리
    - 예약 성공/실패에 대한 명확한 피드백 제공
3. **API 엔드포인트**
    - 좌석 목록 조회 API
    - 좌석 예약 요청 API
    - HTTP 통신을 통한 데이터 교환
4. **코드 품질 보장**
    - 테스트 코드
    - 타입 체크
    - 린팅

### 기본 요구사항

> 아래 목표들을 달성하기 위한 구현 방법은 자유롭게 선택하세요.

> 각 목표를 어떻게 해결했는지 README에 설명해주세요.

1. **사용자 경험 개선**
    - **목표**: 사용자가 서비스를 이용할 때 발생할 수 있는 불편함 최소화
    - **예시**
        - 직관적인 UI
        - 네트워크 지연이 발생했을 때 편의성
        - 예약이 실패했을 때 편의성
        - 모바일에서 접속했을 때 편의성
2. **안정적인 서비스 운영**
    - **목표**: 예상치 못한 상황에서도 서비스가 안정적으로 동작
    - **예시**
        - 잘못된 요청이 들어왔을 때
        - 존재하지 않는 좌석을 예약하려 할 때
        - 서버 에러가 발생했을 때
        - 데이터 정합성 보장

### 심화 요구사항

> 아래 목표들을 달성하기 윈한 구현 방법은 자유롭게 선택하세요.

> 각 목표를 달성했음을 검증할 방법을 마련하세요.

> 시도한 방법이 어떤 방식으로 문제를 해결했으며 보유한 한계점에 대해 상세히 README에 설명해주세요.


1. **동시성 제어**
    - **상황**: 여러 사용자가 동시에 같은 좌석을 예약하려고 시도하는 경우
    - **목표**: 한 좌석에 대해 단 한 명만 예약에 성공하도록 보장
2. **실시간 좌석 상태 동기화**
    - 상황: UI에서 사용자들이 이미 선택된 좌석을 선택하게 되는 경우
    - 목표: 실시간 좌석 예약 상태를 확인할 수 있도록 실시간 동기화 제공
3. **선택한 좌석에 대한 우선순위 제공**
    - 상황 : 좌석 선택 후 예약자 정보를 입력하는 동안 다른 사용자가 좌석을 예약하게 되는 경우
    - 목표: 동일 좌석에 대해 먼저 선택을 한 사용자에게 예약 우선순위 제공

## 참고사항

### 진행 방식

- 최소 요구사항을 먼저 완성한 후 기본 기능을 구현해주세요
- 심화 요구사항은 구현에 실패해도 고민한 해결 방법이 있으면 작성해주세요.

### 필수 제출 항목

- **README.md**: 다음 내용을 반드시 포함
    - 프로젝트 실행 방법 (상세하게)
    - 기술 스택 선택 이유
    - 구현한 요구사항 체크리스트
    - 각 요구사항별 해결 방법 설명

### 선택 제출 항목

- 아키텍처 다이어그램
- 시연 영상 또는 GIF

---

<!-- 구현 내용 작성 -->
# Good-Night-4th-Hackathon

공연 좌석 예매 시스템 풀스택 구현

## 프로젝트 개요

이 프로젝트는 사용자가 웹에서 공연 좌석을 확인하고 예약할 수 있는 시스템입니다. 프론트엔드는 **React**를 사용해 직관적이고 반응형 UI를 구현하였고, 백엔드는 **Node.js와 Express**를 활용해 빠르고 안정적으로 구현했습니다. 또한 **REST API**를 통해 프론트엔드와 백엔드 간 데이터를 실시간으로 교환합니다.

## 프로젝트 실행 방법
1. **레포지토리 클론:**
git clone https://github.com/doyun9288/Good-Night-4th-Hackathon.git
cd ood-Night-4th-Hackathon
2. **환경 설치**
- Node.js 설치: [https://nodejs.org/](https://nodejs.org/)
3. **프론트엔드 설치 밎 실행**
- 프론트엔드 디렉토리로 이동  
cd frontend
- 의존성 설치  
npm install
- 개발 서버 실행 (포트 3000)  
npm start
4. **백엔드 설치 및 실행**
- 백엔드 디렉토리로 이동  
cd backend
- 의존성 설치  
npm install
- 개발 모드 실행 (포트 5000, 자동 DB 초기화)  
npm run dev

---

## 기술 스택 선택 이유
- **React**: 가상 DOM을 사용한 빠른 렌더링
- **Node.js + Express**: 빠른 서버 사이드 개발과 REST API 구현이 쉬움
- **SQLite**: 서버 설치나 별도의 설정이 필요 없는 가벼운 파일 기반 데이터베이스로, 소규모 프로젝트에서 빠르게 데이터 관리를 할 수 있음

---

## 구현한 요구사항 체크리스트
### 최소 요구사항
- [x] 좌석 현황 표시
- [x] 좌석 예약 기능
- [x] API 엔드포인트
- [x] 코드 품질 보장
### 기본 요구사항
- [x] 사용자 경험 개선
- [x] 안정적인 서비스 운영
### 심화 요구사항
- [ ] 동시성 제어
- [ ] 실시간 좌석 상태 동기화
- [ ] 선택한 좌석에 대한 우선순위 제공

## 각 요구사항별 해결 방법 설명
### 최소 요구사항
1. **좌석 현황 표시:**
  - `useEffect`를 사용하여 백엔드 API(/api/booked-seats)에서 예약된 좌석 배열을 가져옴.
  - 좌석을 표시하는 `Seat`컴포넌트가 `SeatGrid`컴포넌트를 부모로 함으로써 3x3배열로 나타남.
  - props(isBooked, isSelected)를 받은 `Seat`컴포넌트가 좌석의 상태를 시각적으로 나타냄.
2. **좌석 예약 기능:**
  - 사용자가 예약 가능한 좌석을 클릭하면, 선택된 좌석 정보를 Home 컴포넌트의 selectedSeats 상태로 저장하고 Reservation 컴포넌트를 렌더링합니다.
  - Reservation 컴포넌트에서 예약자 이름, 이메일, 전화번호를 입력하고 '예매 완료' 버튼을 누르면 모든 필드가 입력되었는지 검증하며, 빈 필드가 있으면 alert()을 통해 경고 메시지를 표시합니다.
  - 모든 정보 입력 완료 후 /api/db-test API로 서버 상태를 확인하고, 정상이면 POST /api/book-seats API를 호출합니다. 백엔드에서는 Math.random() < 0.01 조건으로 1% 확률의 의도적인 예매 실패를 시뮬레이션합니다.
  - API 호출 결과에 따라 성공 시 alert()으로 성공 메시지를 표시하고 홈 화면으로 복귀하며, 실패 시에는 alert()으로 오류 메시지를 표시하고 폼 데이터를 초기화하여 사용자에게 피드백을 제공합니다.
3. **API 엔드포인트:**
4. **코드 품질 보장:**

- [x] 3x3 격자 형태로 총 9개의 좌석 표시  
  - 각 좌석에 번호를 매기고 무대 위치를 표시함으로써 좌석의 위치를 알기 쉽게 함.
- [x] 각 좌석의 예약 가능/불가능 상태를 시각적으로 구분  
  - 빈 자리는 흰색, 예매된 자리는 빨간색, 선택한 자리는 초록색으로 구분.


- [x] 예매된 자리에 마우스를 올릴 경우 마우스 포인터의 모양이 금지 표시로 바뀜.
- [x] 페이지를 이동하여 예약자 정보 입력  
  - 예약 페이지로 이동하면 이름, 이메일, 전화번호를 작성
- [x] 정보 입력 완료 후 예약 확정 시도
  - Math.random()을 사용하여 1%확률로 예매 실패 구현
- [x] 예약 성공/실패에 대한 명확한 피드백 제공  
  - 예약 성공 시 팝업이 뜨면서 예약자 이름과 좌석 번호를 알려줌.  
  - 예약 실패 시 적절한 안내 메시지 제공.

- [x] 좌석 목록 조회 API  
  - 예약된 좌석 리스트를 반환
- [x] 좌석 예약 요청 API  
  - 좌석 정보와 사용자 정보를 전달해 좌석 예약 요청
- [x] HTTP 통신을 통한 데이터 교환
  - 프론트엔드(React)와 백엔드(Node.js + Express) 간에 HTTP 통신을 통해 데이터 교환 구현
  - HTTP메서드로 요청하고 JSON형식으로 전달


- [ ] 테스트 코드
- [x] 타입 체크
  - 기본 타입 체크 함수 추가(배열, 숫자,, 문자열, 함수, 객체 타입 검증)
  - 실시간 타입 검증(API 응답 데이터, 사용자 입력, 상태 업데이트, 컴포넌트 렌더링)
- [ ] 린팅


- [x] 직관적인 UI
  - 직관적인 UI를 위해 좌석 상태를 알려주는 범례를 제거.
- [x] 네트워크 지연이 발생했을 때 편의성
  - 네트워크 지연이 발생할 경우 로딩 화면을 띄워 네트워크 지연이 표시.


- [x] 잘못된 요청이 들어왔을 때
  - 도메인별 유효성 체크(좌석 번호, 좌석 배열, 페이지 상태, 로딩 상태)
- [x] 존재하지 않는 좌석을 예약하려 할 때
  - 좌석 번호 유효성 체크(1-9범위 내의 정수인지 확인)
