# Good-Night-4th-Hackathon
공연 좌석 예매 시스템 풀스택 구현

## 안내사항

- 본 레포지토리를 **fork**하여 과제를 수행하고, 완료시 PR을 보냅니다.
- 과제의 소스코드는 본인의 GitHub 레포지토리에 **Public**으로 올려주세요.
- 진행 간 문의사항은 이 레포지토리의 Issue로 등록해주세요.
- 구현 내용은 README.md 하단에 이어서 작성해 주세요.

## 과제 목표

공연 좌석 예매 시스템 구현

### 기술 스택

- Backend: 자유 선택 (Spring Boot, Node.js, Django, FastAPI 등)
- Frontend: 자유 선택 (React, Vue, Svelte, Vanilla JS 등)
- Database: 자유 선택
- 선택한 기술 스택에 대한 이유를 README에 간단히 설명해주세요

### 평가 항목

- 문제 해결 접근 방식에서 기술적 의사결정
- 구현 완성도와 문서화 수준

## 요구사항

### 최소 요구사항
> 아래 목표들을 달성하기 위한 구현 방법은 자유롭게 선택하세요.

1. **좌석 현황 표시**
    - 3x3 격자 형태로 총 9개의 좌석 표시
    - 각 좌석의 예약 가능/불가능 상태를 시각적으로 구분
2. **좌석 예약 기능**
    - 사용자가 빈 좌석을 클릭하여 선택
    - 페이지를 이동하여 예약자 정보 입력
    - 정보 입력 완료 후 예약 확정 시도
        - 99% 확률로 예약 성공 처리
        - 1% 확률로 의도적 실패 처리
    - 예약 성공/실패에 대한 명확한 피드백 제공
3. **API 엔드포인트**
    - 좌석 목록 조회 API
    - 좌석 예약 요청 API
    - HTTP 통신을 통한 데이터 교환
4. **코드 품질 보장**
    - 테스트 코드
    - 타입 체크
    - 린팅

### 기본 요구사항

> 아래 목표들을 달성하기 위한 구현 방법은 자유롭게 선택하세요.

> 각 목표를 어떻게 해결했는지 README에 설명해주세요.

1. **사용자 경험 개선**
    - **목표**: 사용자가 서비스를 이용할 때 발생할 수 있는 불편함 최소화
    - **예시**
        - 직관적인 UI
        - 네트워크 지연이 발생했을 때 편의성
        - 예약이 실패했을 때 편의성
        - 모바일에서 접속했을 때 편의성
2. **안정적인 서비스 운영**
    - **목표**: 예상치 못한 상황에서도 서비스가 안정적으로 동작
    - **예시**
        - 잘못된 요청이 들어왔을 때
        - 존재하지 않는 좌석을 예약하려 할 때
        - 서버 에러가 발생했을 때
        - 데이터 정합성 보장

### 심화 요구사항

> 아래 목표들을 달성하기 윈한 구현 방법은 자유롭게 선택하세요.

> 각 목표를 달성했음을 검증할 방법을 마련하세요.

> 시도한 방법이 어떤 방식으로 문제를 해결했으며 보유한 한계점에 대해 상세히 README에 설명해주세요.


1. **동시성 제어**
    - **상황**: 여러 사용자가 동시에 같은 좌석을 예약하려고 시도하는 경우
    - **목표**: 한 좌석에 대해 단 한 명만 예약에 성공하도록 보장
2. **실시간 좌석 상태 동기화**
    - 상황: UI에서 사용자들이 이미 선택된 좌석을 선택하게 되는 경우
    - 목표: 실시간 좌석 예약 상태를 확인할 수 있도록 실시간 동기화 제공
3. **선택한 좌석에 대한 우선순위 제공**
    - 상황 : 좌석 선택 후 예약자 정보를 입력하는 동안 다른 사용자가 좌석을 예약하게 되는 경우
    - 목표: 동일 좌석에 대해 먼저 선택을 한 사용자에게 예약 우선순위 제공

## 참고사항

### 진행 방식

- 최소 요구사항을 먼저 완성한 후 기본 기능을 구현해주세요
- 심화 요구사항은 구현에 실패해도 고민한 해결 방법이 있으면 작성해주세요.

### 필수 제출 항목

- **README.md**: 다음 내용을 반드시 포함
    - 프로젝트 실행 방법 (상세하게)
    - 기술 스택 선택 이유
    - 구현한 요구사항 체크리스트
    - 각 요구사항별 해결 방법 설명

### 선택 제출 항목

- 아키텍처 다이어그램
- 시연 영상 또는 GIF

---

<!-- 구현 내용 작성 -->

repo: [결과물 REPO](https://github.com/lazyjsh03/ticket-full)

## 1. 기술 스택 및 선택 이유

### Backend
| 기술 | 선택 이유 |
|---|---|
| **Django** | 'Batteries-included' 철학을 바탕으로 인증, ORM 등 웹 개발에 필요한 대부분의 기능을 내장하여 생산성이 높습니다. |
| **DRF** | Django 기반 REST API 개발의 표준으로, Serializer, ViewSet, 권한 관리 등 강력한 기능을 제공합니다. |
| **MySQL** | 대용량 데이터를 안정적으로 처리할 수 있는 RDBMS이며, 데이터 정합성이 중요한 예매 시스템에 적합합니다. |
| **Simple JWT** | 상태 비저장(Stateless) 인증 방식인 JWT를 DRF 환경에서 간편하게 구현할 수 있도록 지원합니다. |

### Frontend
| 기술 | 선택 이유 |
|---|---|
| **React** | 컴포넌트 기반 아키텍처를 통해 재사용성과 유지보수성이 높은 UI를 구축할 수 있습니다. |
| **TypeScript** | 정적 타입 검사를 통해 코드 실행 전에 오류를 발견하여 애플리케이션의 안정성을 크게 향상시킵니다. |
| **Vite** | 빠른 빌드 속도와 HMR(Hot Module Replacement)을 제공하여 최상의 프론트엔드 개발 경험을 제공합니다. |
| **Tailwind CSS** | Utility-First CSS 프레임워크로, 빠르고 일관된 반응형 UI 디자인을 가능하게 합니다. |

### Code Quality & DevOps
| 기술 | 종류 | 선택 이유 |
|---|---|---|
| **Docker** | - | 모든 개발 환경(DB, Backend, Frontend)을 컨테이너화하여 일관된 개발/배포 환경을 보장합니다. |
| **Testing** | Pytest, Vitest | 백엔드 API와 프론트엔드 컴포넌트의 동작을 검증하여 코드 변경 시 발생할 수 있는 회귀(regression) 문제를 방지하고 기능의 안정성을 보장합니다. |
| **Linting/Typing** | Ruff, Mypy, ESLint | 코드 스타일을 통일하고, 잠재적인 오류를 사전에 발견하여 코드의 가독성과 유지보수성을 극대화합니다. |
| **API Docs** | drf-spectacular | OpenAPI 3.0 명세를 따르는 Swagger UI를 자동으로 생성하여 API 명세를 효율적으로 관리하고 테스트할 수 있도록 합니다. |

## 2. 프로젝트 실행 방법

본 프로젝트는 Docker Compose를 사용하여 모든 서비스를 한 번에 실행하는 것을 권장합니다.

### 사전 요구사항
- Docker
- Docker Compose

### 실행 순서

1.  **Git 저장소 클론**
    ```bash
    git clone <repository-url>
    cd <repository-folder>
    ```

2.  **환경 변수 파일 생성**
    프로젝트 루트 폴더에 `.env` 파일을 생성하고 아래 내용을 각자의 환경에 맞게 채웁니다.
    ```env
    # .env
    MYSQL_ROOT_PASSWORD=your_root_password
    MYSQL_DATABASE=ticket_db
    MYSQL_USER=your_user
    MYSQL_PASSWORD=your_password
    ```

3.  **Docker 컨테이너 빌드 및 실행**
    아래 명령어 하나만 실행하면, 데이터베이스 생성, 백엔드 마이그레이션, 프론트/백엔드 서버 실행이 모두 자동으로 완료됩니다.
    ```bash
    docker-compose up --build -d
    ```

4.  **(선택) 관리자 계정 생성**
    ```bash
    docker-compose exec web python manage.py createsuperuser
    ```

5.  **서비스 접속**
    - **Frontend (React)**: `http://localhost:5173`
    - **Backend (Django)**: `http://localhost:8000`
    - **API Docs (Swagger UI)**: `http://localhost:8000/api/schema/swagger-ui/`

### 테스트 코드
#### 백엔드 테스트 실행
```bash
# 가상환경 활성화
source .venv/bin/activate

# 모든 테스트 실행 (자동으로 SQLite 사용)
python manage.py test
```

#### 프론트엔드 테스트 실행
```bash
# 모든 테스트 실행
yarn test
```

## 3. 구현한 요구사항 체크리스트

- [x] **최소 요구사항**
    - [x] 좌석 현황 표시 (3x3 격자, 상태 구분)
    - [x] 좌석 예약 기능 (선택, 확정, 99%/1% 성공/실패 시뮬레이션)
    - [x] API 엔드포인트 (좌석 목록, 좌석 예약)
    - [x] 코드 품질 보장 (테스트, 타입 체크, 린팅)
- [x] **기본 요구사항**
    - [x] 사용자 경험 개선 (UI, 네트워크 지연, 예약 실패, 모바일 반응형)
    - [x] 안정적인 서비스 운영 (잘못된 요청, 서버 에러)
- [ ] **심화 요구사항**
    - [ ] 동시성 제어
    - [ ] 실시간 좌석 상태 동기화
    - [ ] 선택한 좌석에 대한 우선순위 제공

## 4. 각 요구사항별 해결 방법 설명

### 4.1. 최소 요구사항

- **좌석 표시**: `GET /api/seats/`로 좌석 정보를 받아와 React에서 상태별로 다른 CSS 클래스를 적용하여 렌더링했습니다. 프론트에서 좌석의 예약 현황을 useState를 통해서 관리하여, 상태에 따라 색을 달리하였습니다.
- **좌석 예약**: 예약은 `POST /api/seats/reserve/`를 호출하며, 백엔드의 `random.random()`을 이용해 1%의 의도적 실패를 시뮬레이션했습니다.
- **API 엔드포인트**: DRF와 `drf-spectacular`를 사용하여 요구사항에 명시된 기본 API 외 예약 취소, 내역 조회, 관리자용 초기화 등 확장된 기능을 포함한 RESTful API를 설계하고 Swagger UI로 문서화했습니다.
- **코드 품질 보장**: `Ruff`, `Mypy`, `ESLint`, `Prettier`, `Vitest` 등 각 생태계의 표준 도구를 도입하고, `pre-commit`과 `husky`를 통해 Git 커밋 시점에 이 모든 검사를 자동화하여 높은 수준의 코드 품질을 프로젝트 전반에 걸쳐 일관되게 유지하도록 시스템을 구축했습니다.

### 4.2. 기본 요구사항

#### **사용자 경험 개선**
- **네트워크 지연 및 예약 실패**: 프론트엔드에서 API 호출 시 로딩 상태를 관리하여 사용자에게 스피너 등을 통해 시스템이 동작 중임을 명확히 알렸습니다. 또한, 백엔드가 반환하는 구체적인 에러 코드(409, 404 등)를 바탕으로 사용자에게 "이미 예약된 좌석입니다"와 같이 친절하고 상황에 맞는 토스트 알림을 제공하고, 필요시 데이터를 자동으로 새로고침하여 향상된 UX를 제공하도록 구현했습니다.
- **사용자 겅험 개선**: 프로필 페이지를 만들어 `GET /api/users/me/reservations/`로 예약한 좌석을 받아와서 본인이 예약한 좌석 목록을 표시하고, `DELETE /api/seats/{seat_number}/cancel/`로 예약 취소하는 로직을 구현하였습니다.
- **모바일 편의성**: Tailwind CSS의 반응형 디자인 기능을 활용하여 모바일 화면에서도 UI가 깨지지 않고 최적화된 레이아웃을 제공하도록 설계했습니다.

#### **안정적인 서비스 운영**
- **잘못된 요청 및 서버 에러 처리**: DRF Serializer를 통해 API로 들어오는 모든 요청의 유효성을 검사하여 비정상적인 요청을 사전에 차단(`400 Bad Request`)합니다.

## 5. API 문서
<img width="1458" height="503" alt="image" src="https://github.com/user-attachments/assets/fe7a80c7-45c4-41fa-be0d-c5daecae2455" />
