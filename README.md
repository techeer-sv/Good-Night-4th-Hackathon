# Good-Night-4th-Hackathon

공연 좌석 예매 시스템 풀스택 구현

## 안내사항

- 본 레포지토리를 **fork**하여 과제를 수행하고, 완료시 PR을 보냅니다.
- 과제의 소스코드는 본인의 GitHub 레포지토리에 **Public**으로 올려주세요.
- 진행 간 문의사항은 이 레포지토리의 Issue로 등록해주세요.
- 구현 내용은 README.md 하단에 이어서 작성해 주세요.

## 과제 목표

공연 좌석 예매 시스템 구현

### 기술 스택

- Backend: Spring Boot 3.5.4, Java 17
- Frontend: HTML5, CSS3, JavaScript (Vanilla)
- Database: H2 (In-Memory)
- Build Tool: Gradle
- Documentation: Swagger/OpenAPI 3

#### 기술 스택 선택 이유

- **Spring Boot**: 엔터프라이즈급 애플리케이션 개발에 적합한 강력한 프레임워크
- **Java 17**: LTS 버전으로 안정성과 최신 기능 제공
- **H2**: 개발 및 테스트 환경에서 빠른 설정과 실행
- **Vanilla JS**: 의존성 없이 순수한 웹 기술로 구현하여 학습 효과 극대화

### 평가 항목

- 문제 해결 접근 방식에서 기술적 의사결정
- 구현 완성도와 문서화 수준

## 요구사항

### 최소 요구사항

> 아래 목표들을 달성하기 위한 구현 방법은 자유롭게 선택하세요.

1. **좌석 현황 표시**
   - 3x3 격자 형태로 총 9개의 좌석 표시
   - 각 좌석의 예약 가능/불가능 상태를 시각적으로 구분
2. **좌석 예약 기능**
   - 사용자가 빈 좌석을 클릭하여 선택
   - 페이지를 이동하여 예약자 정보 입력
   - 정보 입력 완료 후 예약 확정 시도
     - 99% 확률로 예약 성공 처리
     - 1% 확률로 의도적 실패 처리
   - 예약 성공/실패에 대한 명확한 피드백 제공
3. **API 엔드포인트**
   - 좌석 목록 조회 API
   - 좌석 예약 요청 API
   - HTTP 통신을 통한 데이터 교환
4. **코드 품질 보장**
   - 테스트 코드
   - 타입 체크
   - 린팅

### 기본 요구사항

> 아래 목표들을 달성하기 위한 구현 방법은 자유롭게 선택하세요.

> 각 목표를 어떻게 해결했는지 README에 설명해주세요.

1. **사용자 경험 개선**
   - **목표**: 사용자가 서비스를 이용할 때 발생할 수 있는 불편함 최소화
   - **예시**
     - 직관적인 UI
     - 네트워크 지연이 발생했을 때 편의성
     - 예약이 실패했을 때 편의성
     - 모바일에서 접속했을 때 편의성
2. **안정적인 서비스 운영**
   - **목표**: 예상치 못한 상황에서도 서비스가 안정적으로 동작
   - **예시**
     - 잘못된 요청이 들어왔을 때
     - 존재하지 않는 좌석을 예약하려 할 때
     - 서버 에러가 발생했을 때
     - 데이터 정합성 보장

### 심화 요구사항

> 아래 목표들을 달성하기 위한 구현 방법은 자유롭게 선택하세요.

> 각 목표를 달성했음을 검증할 방법을 마련하세요.

> 시도한 방법이 어떤 방식으로 문제를 해결했으며 보유한 한계점에 대해 상세히 README에 설명해주세요.

1. **동시성 제어**
   - **상황**: 여러 사용자가 동시에 같은 좌석을 예약하려고 시도하는 경우
   - **목표**: 한 좌석에 대해 단 한 명만 예약에 성공하도록 보장
2. **실시간 좌석 상태 동기화**
   - 상황: UI에서 사용자들이 이미 선택된 좌석을 선택하게 되는 경우
   - 목표: 실시간 좌석 예약 상태를 확인할 수 있도록 실시간 동기화 제공
3. **선택한 좌석에 대한 우선순위 제공**
   - 상황 : 좌석 선택 후 예약자 정보를 입력하는 동안 다른 사용자가 좌석을 예약하게 되는 경우
   - 목표: 동일 좌석에 대해 먼저 선택을 한 사용자에게 예약 우선순위 제공

## 참고사항

### 진행 방식

- 최소 요구사항을 먼저 완성한 후 기본 기능을 구현해주세요
- 심화 요구사항은 구현에 실패해도 고민한 해결 방법이 있으면 작성해주세요.

### 필수 제출 항목

- **README.md**: 다음 내용을 반드시 포함
  - 프로젝트 실행 방법 (상세하게)
  - 기술 스택 선택 이유
  - 구현한 요구사항 체크리스트
  - 각 요구사항별 해결 방법 설명

### 선택 제출 항목

- 아키텍처 다이어그램
- 시연 영상 또는 GIF

---

<!-- 구현 내용 작성 -->

## 🎭 구현 완료 현황

### ✅ 최소 요구사항 달성

#### 1. 좌석 현황 표시

- **3x3 격자 형태**: A1, A2, A3, B1, B2, B3, C1, C2, C3 총 9개 좌석
- **시각적 구분**:
  - 🟢 초록색: 예약 가능한 좌석
  - 🔴 빨간색: 이미 예약된 좌석
  - 🔵 파란색: 현재 선택된 좌석
- **범례 표시**: 좌석 상태를 명확하게 구분할 수 있는 범례 제공

#### 2. 좌석 예약 기능

- **좌석 선택**: 사용자가 빈 좌석을 클릭하여 선택
- **정보 입력**: 예약자 이름 입력 폼 제공
- **예약 확정**: 99% 성공, 1% 의도적 실패 확률로 처리
- **피드백 제공**: 성공/실패에 대한 명확한 메시지와 시각적 피드백

#### 3. API 엔드포인트

- **좌석 목록 조회**: `GET /api/seats`
- **좌석 예약 요청**: `POST /api/reservations`
- **HTTP 통신**: RESTful API를 통한 데이터 교환

#### 4. 코드 품질 보장

- **테스트 코드**: 각 서비스 레이어에 대한 단위 테스트 구현
- **타입 체크**: Java 17과 Spring Boot 3.5.4 사용
- **린팅**: Lombok을 통한 코드 간소화

### ✅ 기본 요구사항 달성

#### 1. 사용자 경험 개선

##### 직관적인 UI

- **모던한 디자인**: 그라데이션 배경과 그림자 효과
- **애니메이션**: 좌석 선택, 폼 표시, 메시지 전환 시 부드러운 애니메이션
- **반응형 디자인**: 모바일과 데스크톱에서 모두 최적화된 경험

##### 네트워크 지연 대응

- **로딩 상태**: 예약 처리 중 시각적 피드백
- **재시도 로직**: 최대 3번까지 자동 재시도
- **에러 처리**: 네트워크 오류 시 명확한 안내 메시지

##### 예약 실패 시 편의성

- **상세한 에러 메시지**: 실패 원인을 명확하게 표시
- **자동 재시도**: 시스템 오류 시 자동으로 재시도
- **사용자 안내**: 다음 단계에 대한 명확한 안내

##### 모바일 최적화

- **터치 친화적**: 충분한 터치 영역과 간격
- **반응형 그리드**: 화면 크기에 맞는 좌석 배치
- **모바일 전용 스타일**: 작은 화면에서 최적화된 UI

#### 2. 안정적인 서비스 운영

##### 잘못된 요청 처리

- **입력 검증**: 예약자 이름 필수 입력 검증
- **데이터 정합성**: 좌석 상태와 예약 정보의 일관성 보장
- **예외 처리**: 각종 예외 상황에 대한 적절한 응답

##### 존재하지 않는 리소스 처리

- **404 응답**: 존재하지 않는 좌석/예약 조회 시 적절한 에러 응답
- **사용자 안내**: 올바른 리소스 사용 방법 안내

##### 서버 에러 대응

- **전역 예외 처리**: 모든 예외 상황을 포괄하는 핸들러
- **로깅**: 상세한 에러 로그와 사용자 행동 추적
- **graceful degradation**: 오류 발생 시에도 사용자 경험 최소화

##### 데이터 정합성 보장

- **트랜잭션 관리**: 예약 과정의 원자성 보장
- **동시성 제어**: 동시 예약 시도 시 적절한 처리
- **상태 동기화**: 좌석 상태와 예약 정보의 실시간 동기화

## 🚀 실행 방법

### 1. 프로젝트 빌드

```bash
cd ticket_service/ticket_service
./gradlew build
```

### 2. 애플리케이션 실행

```bash
./gradlew bootRun
```

### 3. 접속

- **메인 페이지**: http://localhost:8080
- **H2 콘솔**: http://localhost:8080/h2-console
- **API 문서**: http://localhost:8080/swagger-ui/index.html

## 🧪 테스트

### 단위 테스트 실행

```bash
./gradlew test
```

### 테스트 커버리지 확인

```bash
./gradlew test jacocoTestReport
```

## 📱 주요 기능

### 좌석 예약 프로세스

1. **좌석 선택**: 3x3 격자에서 원하는 좌석 클릭
2. **정보 입력**: 예약자 이름 입력
3. **예약 확정**: 버튼 클릭으로 예약 완료
4. **결과 확인**: 성공/실패 메시지 표시

### API 사용법

#### 좌석 조회

```bash
GET /api/seats
```

#### 예약 생성

```bash
POST /api/reservations
Content-Type: application/json

{
  "seatId": 1,
  "memberName": "홍길동"
}
```

## 🔧 설정

### 데이터베이스

- H2 인메모리 데이터베이스 사용
- 애플리케이션 시작 시 3x3 격자 좌석 자동 생성
- 개발용 H2 콘솔 활성화

### 로깅

- DEBUG 레벨 로깅으로 상세한 정보 제공
- SQL 쿼리 로깅으로 성능 모니터링
- 예약 시도 및 결과 로깅

## 🎯 향후 개선 계획

### 기능 확장

- [ ] 좌석 예약 취소 기능
- [ ] 예약 시간 제한 설정
- [ ] 관리자 대시보드
- [ ] 예약 이력 조회

### 성능 최적화

- [ ] Redis 캐싱 도입
- [ ] 데이터베이스 인덱싱 최적화
- [ ] 비동기 처리 도입

### 보안 강화

- [ ] JWT 인증 추가
- [ ] Rate Limiting 구현
- [ ] 입력 데이터 검증 강화

## 📞 문의

프로젝트에 대한 문의사항이나 개선 제안이 있으시면 언제든 연락해주세요.

---

**개발자**: Good Night 4th Hackathon Team  
**버전**: 1.0.0  
**최종 업데이트**: 2024년
